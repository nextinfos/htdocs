(function(e){function t(t){var n={},r=/^data-nrad\-(.+)$/;return e.each(t.get(0).attributes,function(e,t){if(r.test(t.nodeName)){var i=t.nodeName.match(r)[1];n[i]=isNaN(t.nodeValue)?t.nodeValue:+t.nodeValue}}),n}e.fn.ninjaRadial=function(n){this.each(function(){var r=e(this),i=e.extend({data:{},innerSize:180,borderSize:10,distance:60,backColor:"transparent",borderColor:"transparent",itemHeight:40,itemWidth:40,lineHeight:40,buttons:null,onLoad:null},n);i==null&&(i=new Array),r.css({position:"relative"}),r.on("click",{nrad:r,parameters:i},function(n){var r=n.data.nrad,i=n.data.parameters,s=t(r),o=n.pageX,u=n.pageY,a=e(".ninjaRadial");a.length==0&&(a=e("<div>",{"class":"ninjaRadial"}).bind("click",function(t){e(this).toggleClass("open")}));if(!!a.hasClass("open")){a.toggleClass("open");return}a.css({left:o,top:u,marginLeft:-i.borderSize-i.innerSize/2,marginTop:-i.borderSize-i.innerSize/2,width:i.innerSize+"px",height:i.innerSize+"px",borderWidth:i.borderSize+"px",backgroundColor:i.backColor,borderColor:i.borderColor}).html("");var f=e.extend(!0,{},i);typeof i.onLoad=="function"&&i.onLoad(r,f);var l=f.buttons.length;for(var c=0;c<l;c++){var h=f.buttons[c],p=f.innerSize/2+f.distance*Math.cos(2*Math.PI/l*c-Math.PI/2).toFixed(4),d=f.innerSize/2+f.distance*Math.sin(2*Math.PI/l*c-Math.PI/2).toFixed(4),v=e("<div>",{"class":"nradItem"}).css({width:f.itemWidth,height:f.itemHeight,left:p-f.itemWidth/2,top:d-f.itemHeight/2,lineHeight:f.itemHeight+"px"}).addClass(h.cssItem);v.bind("click",{btn:h,dataItem:s},function(e){typeof h.click=="function"&&e.data.btn.click(e,e.data.dataItem,r)});var m=e("<i>",{"class":h.cssIcon}).addClass(h.cssIcon),g=e("<label>",{"class":h.cssLabel}).css({fontSize:"10px",lineHeight:"12px",width:f.itemWidth}).addClass(h.cssLabel).html(h.text);v.append(m),v.append(g),a.append(v)}e(".ninjaRadial").length==0&&e("body").append(a),e(document).bind("click",function(){var t=e(".ninjaRadial.open");t.length>0&&t.toggleClass("open")}),setTimeout(function(){a.toggleClass("open")},1)}),r.data("_ninjaRadial",r)})}})(jQuery);